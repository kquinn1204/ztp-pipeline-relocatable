apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
 name: pre-flight
spec:
 workspaces:
  - name: ztp
 params:
  - name: ztp-tag
    type: string
    default: "latest"
  - name: spokes-config
    type: string
    default: ""
  - name: ztp-tag
    type: string
    default: "latest"
 stepTemplate:
  env:
    - name: WORKDIR
      value: "/ztp-pipeline"
    - name: SPOKES_CONFIG
      value: $(params.spokes-config)
 steps:
   - name: verifications
     image: "quay.io/flaper87/ztp-pipeline:$(params.ztp-tag)"
     imagePullPolicy: Always
     script: |
      #!/usr/bin/env bash

      cd $WORKDIR/$SHARED_DIR
      #./verify_preflight.sh
